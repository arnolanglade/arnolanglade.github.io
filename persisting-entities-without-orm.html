<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Persisting entities without ORM</title>
  <meta name='description' content='The repository pattern provides a good abstraction to manage object persistence. Even if a lot of projects use an ORM, persisting entities do not necessarily...'>
  <meta name="keywords" content="software,oop,repository,design patterns,orm,persistence,sql,database">
  <link rel="canonical" href="https://arnolanglade.github.io/persisting-entities-without-orm.html">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Persisting entities without ORM – Arnaud Langlade - Senior software engineer, software architect, and technical coach">
  <meta name="twitter:description" content="The repository pattern provides a good abstraction to manage object persistence. Even if a lot of projects use an ORM, persisting entities do not necessarily require it.">
  <meta name="twitter:image:src" content="https://arnolanglade.github.io/persisting-entity-without-orm.webp">

  <!-- Facebook OpenGraph -->
  <meta property="og:title" content="Persisting entities without ORM – Arnaud Langlade - Senior software engineer, software architect, and technical coach">
  <meta property="og:description" content="The repository pattern provides a good abstraction to manage object persistence. Even if a lot of projects use an ORM, persisting entities do not necessarily require it.">
  <meta property="og:image" content="https://arnolanglade.github.io/persisting-entity-without-orm.webp">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">

  <!-- Ionicons -->
  <link href="https://unpkg.com/ionicons@4.5.0/dist/css/ionicons.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/assets/main.css">
</head>


<body>

    
<script src="https://getinsights.io/js/insights.js"></script>
<script>
    insights.init('VoIrQveDE0uUwpQi');
    insights.trackPages({
        hash: true,
        search: true
    });
</script>
<script type="text/javascript">
    (function(f,b){if(!b.__SV){var e,g,i,h;window.mixpanel=b;b._i=[];b.init=function(e,f,c){function g(a,d){var b=d.split(".");2==b.length&&(a=a[b[0]],d=b[1]);a[d]=function(){a.push([d].concat(Array.prototype.slice.call(arguments,0)))}}var a=b;"undefined"!==typeof c?a=b[c]=[]:c="mixpanel";a.people=a.people||[];a.toString=function(a){var d="mixpanel";"mixpanel"!==c&&(d+="."+c);a||(d+=" (stub)");return d};a.people.toString=function(){return a.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
        for(h=0;h<i.length;h++)g(a,i[h]);var j="set set_once union unset remove delete".split(" ");a.get_group=function(){function b(c){d[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));a.push([e,call2])}}for(var d={},e=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<j.length;c++)b(j[c]);return d};b._i.push([e,f,c])};b.__SV=1.2;e=f.createElement("script");e.type="text/javascript";e.async=!0;e.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
        MIXPANEL_CUSTOM_LIB_URL:"file:"===f.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";g=f.getElementsByTagName("script")[0];g.parentNode.insertBefore(e,g)}})(document,window.mixpanel||[]);

    mixpanel.init('ebca5edb0d7861434aefdf18e32fe9d4');
    mixpanel.track('viewed_page');
</script>



    <!-- begin header -->
<header class="c-header">
  <div class="container">
    <div class="row">
      <div class="c-header__inner">

        <div class="logo">
          <a class="logo__link" href="/">
          
            Langlade Arnaud
          
          </a>
        </div>

        <nav class="main-nav">
          <div class="main-nav__box">

            <div class="nav__icon-close">
              <i class="ion ion-md-close"></i>
            </div>

            <div class="nav__title">Menu</div>

              <ul class="nav__list list-reset">

              
                
                <li class="nav__item">
                  <a href="/" class="nav__link">Home</a>
                </li>
                
              
                
                <li class="nav__item dropdown">
                  <span class="nav__link dropdown-toggle">About me <i class="ion ion-ios-arrow-down arrow-down"></i></span>
                  <div class="dropdown-menu">
                    
                      <a href="/about/" class="nav__link">About me</a>
                    
                      <a href="/experiences/" class="nav__link">My experiences</a>
                    
                      <a href="/talks/" class="nav__link">My talks</a>
                    
                  </div>
                </li>

                
              
                
                <li class="nav__item">
                  <a href="/blog/" class="nav__link">Blog</a>
                </li>
                
              
                
                <li class="nav__item">
                  <a href="/contact/" class="nav__link">Contact</a>
                </li>
                
              

            </ul>
          </div>

          <!--bookshop-live name(social-link.jekyll.html) params() context() -->
          
<div class="social">
  <ul class="social__list list-reset">
    
    <li class="social__item">
      <a class="social__link" href="https://twitter.com/arnolanglade" target="_blank" rel="noopener" aria-label="logo-twitter icon">
        <i class="ion ion-logo-twitter"></i>
      </a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://github.com/arnolanglade" target="_blank" rel="noopener" aria-label="logo-github icon">
        <i class="ion ion-logo-github"></i>
      </a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://www.linkedin.com/in/arnolanglade" target="_blank" rel="noopener" aria-label="logo-linkedin icon">
        <i class="ion ion-logo-linkedin"></i>
      </a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://www.youtube.com/@arnolanglade" target="_blank" rel="noopener" aria-label="logo-youtube icon">
        <i class="ion ion-logo-youtube"></i>
      </a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="mailto:arnaud.langlade@gmail.com" target="_blank" rel="noopener" aria-label="md-mail icon">
        <i class="ion ion-md-mail"></i>
      </a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="/feed.xml" target="_blank" rel="noopener" aria-label="logo-rss icon">
        <i class="ion ion-logo-rss"></i>
      </a>
    </li>
    
  </ul>
</div>


          <!--bookshop-live end-->
        </nav>

        <div class="nav-button">
          <i class="nav__icon nav__icon-menu ion ion-md-menu"></i>
        </div>

      </div>
    </div>
  </div>
</header>
<!-- end header -->


    <div class="post-top">
  <div class="container">
    <div class="row">

      
      <div class="col col-6 col-d-12">
        <div class="post-image">
          <img loading="lazy" src="/images/posts/persisting-entity-without-orm.webp" alt="Persisting entities without ORM">
        </div>
      </div>
      

      <div class="col col-6 col-d-12">
        <div class="post__info">

          
          <div class="post-tags">
            
              <a href="/tag/oop" class="post-tags__tag">oop</a>
            
              <a href="/tag/design-patterns" class="post-tags__tag">design-patterns</a>
            
          </div>
          

          <h1 class="post__title">Persisting entities without ORM</h1>

          <div class="post__meta">
            <div class="post__meta-bottom">
              <time class="post__date" datetime="2021-03-23T00:00:00-05:00">
                23 Mar 2021
              </time>
              
              <p class="post__image-credit">
                Picture: <a class="post__image-credit-link" href="https://unsplash.com/@tofi">@tofi</a>
              </p>
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- begin post -->
<div class="container animate">

  <article class="post">

    <div class="post__content">
      <p>Today, I will talk about persisting entities without ORM. First, I will introduce the repository pattern because it provides a good abstraction to manage object persistence. Then, we will see what are the impacts on the entity design.</p>

<h2 id="repository-pattern">Repository pattern</h2>

<p>The repository design pattern can be used to manage entity persistence and retrieval. It behaves like a collection of objects and hides the complexity of their storage. It ensures a clean separation between the domain model (the entity) and the data model (SQL tables). The following example shows a basic repository interface. Thanks to the <code class="language-plaintext highlighter-rouge">Maps</code> interface we will be able to add and retrieve Map entities, no matter their storage.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">Maps</span>
<span class="p">{</span>
   <span class="cd">/**
    * @throws \LogicException
    * @throws UnknownMap
    */</span>
   <span class="k">public</span> <span class="k">function</span> <span class="n">get</span><span class="p">(</span><span class="kt">MapId</span> <span class="nv">$mapId</span><span class="p">):</span> <span class="kt">Map</span><span class="p">;</span>

   <span class="cd">/**
    * @throws \LogicException
    */</span>
   <span class="k">public</span> <span class="k">function</span> <span class="n">add</span><span class="p">(</span><span class="kt">Map</span> <span class="nv">$map</span><span class="p">):</span> <span class="kt">void</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Caution:</strong> All <code class="language-plaintext highlighter-rouge">Maps</code> implementations should be tested with the same test because we need to be sure they behave the same way. It ensures the application works no matter the chosen implementation.</p>

<p>Let’s see how we can implement this interface with PostgreSQL for instance. The <code class="language-plaintext highlighter-rouge">get</code> method is only responsible to get information from the database to build the map entity whereas the <code class="language-plaintext highlighter-rouge">add</code> method extracts the entity information to store them in the database.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">PostgreSqlMaps</span> <span class="kd">implements</span> <span class="nc">Maps</span>
<span class="p">{</span>
   <span class="k">private</span> <span class="kt">Connection</span> <span class="nv">$connection</span><span class="p">;</span>

   <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span><span class="kt">Connection</span> <span class="nv">$connection</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">connection</span> <span class="o">=</span> <span class="nv">$connection</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">public</span> <span class="k">function</span> <span class="n">get</span><span class="p">(</span><span class="kt">MapId</span> <span class="nv">$mapId</span><span class="p">):</span> <span class="kt">Map</span>
   <span class="p">{</span>
       <span class="nv">$sql</span> <span class="o">=</span> <span class="sh">&lt;&lt;&lt;SQL
           SELECT map."mapId", map.name
           FROM map
           WHERE map."mapId" = :mapId
       SQL;</span>

       <span class="nv">$statement</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">executeQuery</span><span class="p">(</span><span class="nv">$sql</span><span class="p">,</span> <span class="p">[</span><span class="s1">'mapId'</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="nv">$mapId</span><span class="p">]);</span>

       <span class="k">if</span> <span class="p">(</span><span class="kc">false</span> <span class="o">===</span> <span class="nv">$map</span> <span class="o">=</span> <span class="nv">$statement</span><span class="o">-&gt;</span><span class="nf">fetchAssociative</span><span class="p">())</span> <span class="p">{</span>
           <span class="k">throw</span> <span class="nc">UnknownMap</span><span class="o">::</span><span class="nf">withId</span><span class="p">(</span><span class="nv">$mapId</span><span class="p">);</span>
       <span class="p">}</span>

       <span class="k">return</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">(</span><span class="nv">$map</span><span class="p">[</span><span class="s1">'mapId'</span><span class="p">],</span> <span class="nv">$map</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]);</span>
   <span class="p">}</span>

   <span class="k">public</span> <span class="k">function</span> <span class="n">add</span><span class="p">(</span><span class="kt">Map</span> <span class="nv">$map</span><span class="p">):</span> <span class="kt">void</span>
   <span class="p">{</span>
       <span class="nv">$sql</span> <span class="o">=</span> <span class="sh">&lt;&lt;&lt;SQL
           INSERT INTO map ("mapId", name)
           VALUES (:mapId, :name)
           ON CONFLICT ("mapId")
           DO UPDATE SET name = :name;
       SQL;</span>

       <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">executeQuery</span><span class="p">(</span><span class="nv">$sql</span><span class="p">,</span> <span class="p">[</span><span class="s1">'mapId'</span> <span class="o">=&gt;</span> <span class="nv">$map</span><span class="p">,</span> <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nv">$map</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">()]);</span>
   <span class="p">}</span>

   <span class="k">private</span> <span class="k">function</span> <span class="n">executeQuery</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$sql</span><span class="p">,</span> <span class="kt">array</span> <span class="nv">$data</span><span class="p">):</span> <span class="kt">Result</span>
   <span class="p">{</span>
       <span class="c1">// Execute query or throw logic exceptions if something goes wrong.</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Tip:</strong> Thanks to the clause <a href="https://www.postgresql.org/docs/9.5/sql-insert.html">ON CONFLICT</a> we can easily insert or update data with a single query.</p>

<h2 id="entity-design-impacts">Entity design impacts</h2>

<p>Now we are able to persist and retrieve our map entity. Let’s study the impact on entity design.</p>

<p>Let’s start with persistence. In the previous example, I used getters to get its properties but I am not a fan of the getter to be honest! Getters break data encapsulation because they expose object implementation details. They don’t follow the <a href="https://www.martinfowler.com/bliki/TellDontAsk.html">Tell don’t ask</a> principle because we should not ask about the object state to do something, we should tell the object to do something for us. I like adding a <code class="language-plaintext highlighter-rouge">toState</code> method that is responsible to turn the entity into an associative array.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">final</span> <span class="kd">class</span> <span class="nc">Map</span>
<span class="p">{</span>
   <span class="k">public</span> <span class="k">function</span> <span class="n">toState</span><span class="p">():</span> <span class="kt">array</span>
   <span class="p">{</span>
      <span class="k">return</span> <span class="p">[</span>
          <span class="s1">'mapId'</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">mapId</span><span class="p">,</span>
          <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span>
      <span class="p">];</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>So I just need to call the <code class="language-plaintext highlighter-rouge">toState</code> method instead of getters, this method returns data expected by the <code class="language-plaintext highlighter-rouge">executeQuery</code> method.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">PostgreSqlMaps</span> <span class="kd">implements</span> <span class="nc">Maps</span>
<span class="p">{</span>
   <span class="c1">// ...</span>
   <span class="k">public</span> <span class="k">function</span> <span class="n">add</span><span class="p">(</span><span class="kt">Map</span> <span class="nv">$map</span><span class="p">):</span> <span class="kt">void</span>
   <span class="p">{</span>
       <span class="c1">// ...</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">executeQuery</span><span class="p">(</span><span class="nv">$sql</span><span class="p">,</span> <span class="nv">$map</span><span class="o">-&gt;</span><span class="nf">toState</span><span class="p">());</span>
   <span class="p">}</span>
   <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Let’s continue with retrieval. If we have a look at the <code class="language-plaintext highlighter-rouge">Map</code>constructor method we can see that a <code class="language-plaintext highlighter-rouge">MapInitialized</code> event is recorded there. Houston, we have a problem! When we build an entity from its state (data stored somewhere) we don’t want to record any event because nothing happens. So, we need to find a solution to avoid recording those events.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
   <span class="kt">MapId</span> <span class="nv">$mapId</span><span class="p">,</span>
   <span class="kt">MapName</span> <span class="nv">$name</span>
<span class="p">)</span> <span class="p">{</span>
   <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">mapId</span> <span class="o">=</span> <span class="nv">$mapId</span><span class="p">;</span>
   <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">name</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>

   <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">recordEvent</span><span class="p">(</span><span class="k">new</span> <span class="nc">MapInitialized</span><span class="p">(</span>
       <span class="nv">$mapId</span><span class="p">,</span>
       <span class="nv">$name</span>
   <span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<p>I like adding a named constructor called <code class="language-plaintext highlighter-rouge">fromState</code> to the entity. This constructor is responsible for building the aggregate from the state. Moreover, named constructors are explicit and give developers information about when to use them. In the following example, after calling the <a href="https://arnolanglade.github.io/build-object-using-php.html">primary constructor</a> we call the <code class="language-plaintext highlighter-rouge">eraseRecordedEvents</code> method to reset events before returning the object in the right state.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="n">fromState</span><span class="p">(</span><span class="kt">array</span> <span class="nv">$state</span><span class="p">):</span> <span class="kt">self</span>
<span class="p">{</span>
   <span class="nv">$map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">self</span><span class="p">(</span>
       <span class="k">new</span> <span class="nc">MapId</span><span class="p">(</span><span class="nv">$state</span><span class="p">[</span><span class="s1">'mapId'</span><span class="p">]),</span>
       <span class="k">new</span> <span class="nc">MapName</span><span class="p">(</span><span class="nv">$state</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span>
   <span class="p">);</span>

   <span class="nv">$map</span><span class="o">-&gt;</span><span class="nf">eraseRecordedEvents</span><span class="p">();</span>

   <span class="k">return</span> <span class="nv">$map</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>So, the only change in the repository is to build the <code class="language-plaintext highlighter-rouge">Map</code> entity from the named constructor.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">PostgreSqlMaps</span> <span class="kd">implements</span> <span class="nc">Maps</span>
<span class="p">{</span>

   <span class="k">public</span> <span class="k">function</span> <span class="n">get</span><span class="p">(</span><span class="kt">MapId</span> <span class="nv">$mapId</span><span class="p">):</span> <span class="kt">Map</span>
   <span class="p">{</span>
       <span class="c1">// ...</span>

       <span class="k">return</span> <span class="nc">Map</span><span class="o">::</span><span class="nf">fromState</span><span class="p">(</span><span class="nv">$map</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="last-word">Last word</h2>

<p>I did a presentation about the repository design pattern at the Forum PHP in 2018. A video is only available in French <a href="https://www.youtube.com/watch?v=cYFKkhtIr8w&amp;ab_channel=AFUPPHP">here</a> but the slides are in English <a href="https://arnolanglade.gitlab.io/bad-or-good-repository/">here</a> (press “s” to display English notes). Even if this presentation was made for Doctrine ORM it gives a lot of information about the pattern.</p>

<p><strong>Note:</strong> In this talk I spoke about generating the entity identity by the repository. To be honest, I stopped doing that because generating it from controllers is easier and makes the repository design simpler.</p>

<p>Thanks to my proofreader <a href="https://www.linkedin.com/in/laurebrosseau">@LaureBrosseau</a>.</p>

    </div>

    <div class="post__share">
  <div class="share__head">
    <div class="share__title"><i class="ion ion-md-heart"></i> Share it if you like it!</div>
  </div>
  <ul class="share__list list-reset">
    <li class="share__item">
      <a class="share__link share__twitter"
        href="https://twitter.com/intent/tweet?text=Persisting%20entities%20without%20ORM&url=https://arnolanglade.github.io/persisting-entities-without-orm.html"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
        title="Share on Twitter" rel="nofollow"><i class="ion ion-logo-twitter"></i></a>
    </li>
    <li class="share__item">
      <a class="share__link share__facebook"
        href="https://www.facebook.com/sharer/sharer.php?u=https://arnolanglade.github.io/persisting-entities-without-orm.html"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
        title="Share on Facebook" rel="nofollow"><i class="ion ion-logo-facebook"></i></a>
    </li>
    <li class="share__item">
      <a class="share__link share__linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&url=https://arnolanglade.github.io/persisting-entities-without-orm.html&title=Persisting%20entities%20without%20ORM&summary=The%20repository%20pattern%20provides%20a%20good%20abstraction%20to%20manage%20object%20persistence.%20Even%20if%20a%20lot%20of%20projects%20use%20an%20ORM,%20persisting%20entities%20do%20not%20necessarily%20require%20it.&source=Arnaud%20Langlade"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
        title="Share on LinkedIn" rel="nofollow"><i class="ion ion-logo-linkedin"></i></a>
    </li>
  </ul>
</div>


  </article>
</div>
<!-- end post -->

<div class="container">
  <div class="row">
    <div class="col col-10 col-d-12 push-d-0 push-1">
      <div class="post__navigation animate">
  
  <a class="post__prev" href="/oop-how-to-build-an-object.html">
    <div class="prev__image">
      <img loading="lazy" src="/images/posts/build-object.webp" alt="Persisting entities without ORM">
    </div>
    <div class="prev__box">
      <span class="post__nav post__nav__prev">Prev post</span>
      <h2 class="post__nav__title">OOP: how to build an object</h2>
    </div>
  </a>
  

  
  <a class="post__next" href="/how-did-I-organize-my-last-symfony-project.html">
    <div class="next__box">
      <span class="post__nav post__nav__next">Next post</span>
      <h2 class="post__nav__title">How did I organize my last Symfony projects?</h2>
    </div>
    <div class="next__image">
      <img loading="lazy" src="/images/posts/project-symfony-organization.webp" alt="Persisting entities without ORM">
    </div>
  </a>
  
</div>

    </div>
  </div>
</div>







<!-- begin related posts -->
<div class="container">
  <section class="related-posts is-related animate">
    <div class="row">
      <div class="col col-12">
        <div class="container__inner">
          <div class="section__info">
            <div class="section__head">
              <h2 class="section__title">You may also like</h2>
              <a class="section__link" href="/blog">
                
                
                  
                    <a href="/tag/oop" class="section__link related-tag">See all<span> oop</span> <i class="ion ion-md-arrow-forward"></i></a>
                  
                
                  
                
              
              </a>
            </div>
          </div>
          <div class="row">

          
            
            

            

            
            
            
            

            

            

            <!--bookshop-live name(blog-card/blog-card.jekyll.html) params(post=post) context(post=site.posts[1]) -->
          
<div class="c-blog-card col col-4 col-d-6 col-t-12">
  <div class="c-blog-card__inner">

    
    <div class="c-blog-card__image-wrap">
      <a class="c-blog-card__image" href="/why-breaking-encapsulation-is-not-a-good-idea.html">
        <img loading="lazy" src="/images/posts/why-breaking-encapsulation-is-not-a-good-idea/why-breaking-encapsulation-is-not-a-good-idea.webp" alt="Why breaking encapsulation is not a good idea">
      </a>
    </div>
    

    <div class="c-blog-card__content">

      
      <div class="c-blog-card__tags-box">
        
        <a href="/tag/testing" class="c-blog-card__tag">testing</a>
        
        <a href="/tag/oop" class="c-blog-card__tag">oop</a>
        
      </div>
      

      <h2 class="c-blog-card__title">
        <a href="/why-breaking-encapsulation-is-not-a-good-idea.html">Why breaking encapsulation is not a good idea</a>
      </h2>

      <p class="c-blog-card__excerpt">
        This principle restricts direct access to the state of the object from outside. This means that the internal implementation details of a class are hidden. Accessing the state of the object is only allowed through its public API (public methods). This concept helps to protect the data from outside interference and ensures controlled and secure data manipulation.
      </p>

      <div class="c-blog-card__meta">
        <div class="c-blog-card__info">
          <span class="c-blog-card__date"><time datetime="2023-09-19T00:00:00-05:00">19 Sep 2023</time></span>
        </div>
      </div>
    </div>
  </div>
</div>

          <!--bookshop-live end-->

            
                
              
            
            
            

            

            

            <!--bookshop-live name(blog-card/blog-card.jekyll.html) params(post=post) context(post=site.posts[2]) -->
          
<div class="c-blog-card col col-4 col-d-6 col-t-12">
  <div class="c-blog-card__inner">

    
    <div class="c-blog-card__image-wrap">
      <a class="c-blog-card__image" href="/do-not-test-private-methods.html">
        <img loading="lazy" src="/images/posts/do-not-test-private-method/do-not-test-private-methods.webp" alt="Don’t test private methods">
      </a>
    </div>
    

    <div class="c-blog-card__content">

      
      <div class="c-blog-card__tags-box">
        
        <a href="/tag/testing" class="c-blog-card__tag">testing</a>
        
        <a href="/tag/oop" class="c-blog-card__tag">oop</a>
        
      </div>
      

      <h2 class="c-blog-card__title">
        <a href="/do-not-test-private-methods.html">Don’t test private methods</a>
      </h2>

      <p class="c-blog-card__excerpt">
        One of the first mistakes I made when I started to test my code was to test private methods. Spoiler alert: it was a bad idea! If you need to test a private method, it probably means that your code is not well designed. Private methods are implementation details of objects and we should not care about them. When you test public methods you also test the private ones.
      </p>

      <div class="c-blog-card__meta">
        <div class="c-blog-card__info">
          <span class="c-blog-card__date"><time datetime="2023-07-17T00:00:00-05:00">17 Jul 2023</time></span>
        </div>
      </div>
    </div>
  </div>
</div>

          <!--bookshop-live end-->

            
                
              
            
            
            

            

            

            <!--bookshop-live name(blog-card/blog-card.jekyll.html) params(post=post) context(post=site.posts[3]) -->
          
<div class="c-blog-card col col-4 col-d-6 col-t-12">
  <div class="c-blog-card__inner">

    
    <div class="c-blog-card__image-wrap">
      <a class="c-blog-card__image" href="/ease-testing-thanks-to-the-dependency-inversion-design-pattern.html">
        <img loading="lazy" src="/images/posts/inversion-dependency/ease-testing-thanks-to-the-dependency-inversion-design-pattern.webp" alt="Ease testing thanks to the dependency inversion design pattern">
      </a>
    </div>
    

    <div class="c-blog-card__content">

      
      <div class="c-blog-card__tags-box">
        
        <a href="/tag/testing" class="c-blog-card__tag">testing</a>
        
        <a href="/tag/design-pattern" class="c-blog-card__tag">design-pattern</a>
        
        <a href="/tag/oop" class="c-blog-card__tag">oop</a>
        
      </div>
      

      <h2 class="c-blog-card__title">
        <a href="/ease-testing-thanks-to-the-dependency-inversion-design-pattern.html">Ease testing thanks to the dependency inversion design pattern</a>
      </h2>

      <p class="c-blog-card__excerpt">
        The inversion design pattern is quite simple and super powerful. It makes your code more modular. It lets you change a class's dependency to another one depending on the context. It is a good way to decouple your code from IO to make it testable.
      </p>

      <div class="c-blog-card__meta">
        <div class="c-blog-card__info">
          <span class="c-blog-card__date"><time datetime="2023-06-19T00:00:00-05:00">19 Jun 2023</time></span>
        </div>
      </div>
    </div>
  </div>
</div>

          <!--bookshop-live end-->

            
                
                  
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<!-- end related posts -->



  <!-- begin comments -->
<div class="container">
  <div class="row">
    <div class="col col-12">
      <div class="disqus-inner">
        <div id="disqus_thread" class="post__comments">
          <div id="disqus_empty"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function load_disqus() {
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://arnaudlanglade.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }

  window.addEventListener('scroll', function (e) {
    var currentScroll = document.scrollingElement.scrollTop;
    var disqus_target = document.getElementById('disqus_thread');
    var disqus_empty = document.getElementById('disqus_empty');

    if (disqus_target && disqus_empty && (currentScroll > disqus_target.getBoundingClientRect().top - 150)) {
      load_disqus();
    }
  }, false);

</script>
<noscript>Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<!-- end comments -->


<!--bookshop-live name(newsletter/newsletter.jekyll.html) params(newsletter_title=site.data.newsletter.newsletter_title
  newsletter_description=site.data.newsletter.newsletter_description
  newsletter_identifier=site.data.newsletter.newsletter_identifier
  newsletter_button=site.data.newsletter.newsletter_button) context() -->
          <!-- begin subscribe -->

<section class="c-subscribe section">
  <div class="container">
    <div class="row">
      <div class="col col-12">

        <div class="c-subscribe__inner">
          <div class="c-subscribe__info">
            <h3 class="c-subscribe__title">Join my mailing list</h3>
            <div class="c-subscribe__subtitle">
              <span id="ityped"></span>
            </div>
          </div>

          <form class="c-subscribe__form validate" action="https://gmail.us13.list-manage.com/subscribe/post"
            method="POST" id="membedded-subscribe-form" name="membedded-subscribe-form" target="_blank" novalidate>
            <input type="hidden" name="u" value="d7313775f348f8c8d39a841a0">
            <input type="hidden" name="id" value="28bcb90eaa">
            <input type="hidden" name="orig-lang" value="1">
            <label class="screen-reader-text" for="mce-EMAIL">Email address</label>
            <input class="c-subscribe__form-email required email" id="mce-EMAIL" type="text" name="MERGE0" placeholder="Your email address">
            <button class="c-button c-button--primary c-button--large" id="membedded-subscribe" type="submit" name="subscribe">Subscribe</button>
          </form>

        </div>
      </div>
    </div>
  </div>
</section>
<!-- end subscribe -->

<script>
  var itype_text = ['Get inspiration, updates and, cool stuff!'];
</script>
          <!--bookshop-live end-->


    <!--
        Bookshop components are accessed using the bookshop tag,
        using the same syntax as the standard Jekyll include tag.
    -->
    <!--bookshop-live name(page.jekyll.html) params(content_blocks=page.content_blocks page_theme=page.page_theme) context() -->
          
          <!--bookshop-live end-->

    <div class="top" title="Top"><i class="ion ion-ios-arrow-up"></i></div>

    <!-- begin footer -->
<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col col-12">

        <!--bookshop-live name(social-link.jekyll.html) params() context() -->
          
<div class="social">
  <ul class="social__list list-reset">
    
    <li class="social__item">
      <a class="social__link" href="https://twitter.com/arnolanglade" target="_blank" rel="noopener" aria-label="logo-twitter icon">
        <i class="ion ion-logo-twitter"></i>
      </a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://github.com/arnolanglade" target="_blank" rel="noopener" aria-label="logo-github icon">
        <i class="ion ion-logo-github"></i>
      </a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://www.linkedin.com/in/arnolanglade" target="_blank" rel="noopener" aria-label="logo-linkedin icon">
        <i class="ion ion-logo-linkedin"></i>
      </a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://www.youtube.com/@arnolanglade" target="_blank" rel="noopener" aria-label="logo-youtube icon">
        <i class="ion ion-logo-youtube"></i>
      </a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="mailto:arnaud.langlade@gmail.com" target="_blank" rel="noopener" aria-label="md-mail icon">
        <i class="ion ion-md-mail"></i>
      </a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="/feed.xml" target="_blank" rel="noopener" aria-label="logo-rss icon">
        <i class="ion ion-logo-rss"></i>
      </a>
    </li>
    
  </ul>
</div>


          <!--bookshop-live end-->

        <ul class="footer_nav list-reset">
          
          <li class="footer_nav__item">
            <a href="/" class="footer_nav__link">Home</a>
          </li>
          
          <li class="footer_nav__item">
            <a href="/about/" class="footer_nav__link">About me</a>
          </li>
          
          <li class="footer_nav__item">
            <a href="/experiences/" class="footer_nav__link">My experiences</a>
          </li>
          
          <li class="footer_nav__item">
            <a href="/talks/" class="footer_nav__link">My talks</a>
          </li>
          
          <li class="footer_nav__item">
            <a href="/contact/" class="footer_nav__link">Contact</a>
          </li>
          
          <li class="footer_nav__item">
            <a href="/blog/" class="footer_nav__link">Blog</a>
          </li>
          
        </ul>

        <div class="copyright"><p> 2021 &copy; Langlade Arnaud. Template by <a href="https://cloudcannon.com/">CloudCannon</a>.</p></div>

      </div>
    </div>
  </div>
</footer>
<!-- end footer -->

    <!--
        load the live component for CloudCannon live previews.
    -->
    <script>
(function(){
  const bookshopLiveSetup = (CloudCannon) => {
    CloudCannon.enableEvents();

    const head = document.querySelector('head');
    const script = document.createElement('script');
    script.src = `/_cloudcannon/bookshop-live.js`;
    script.onload = function() {
      window.bookshopLive = new window.BookshopLive({
        remoteGlobals: ['/_cloudcannon/bookshop-site-data.json']
      });
      const updateBookshopLive = async () => {
        const frontMatter = await CloudCannon.value();
        const options = window.bookshopLiveOptions || {};
        await window.bookshopLive.update({page: frontMatter}, options);
        CloudCannon?.refreshInterface?.();
      }
      document.addEventListener('cloudcannon:update', updateBookshopLive);
      updateBookshopLive();
    }
    head.appendChild(script);
  }

  document.addEventListener('cloudcannon:load', function (e) {
    bookshopLiveSetup(e.detail.CloudCannon);
  });
})();
</script>

    <script src="/js/scripts.js"></script>
    <script src="/js/common.js"></script>
    <script id="dsq-count-scr" src="//arnaudlanglade.disqus.com/count.js" async></script>
</body>
</html>
